# Minimal local configuration for running the BullMQ worker via docker-compose.

NODE_ENV=development
WORKER_ENV=development

# Required
REDIS_QUEUE_URL=redis://redis:6379
DATABASE_PRIMARY_POOLER_URL=postgresql://midday:midday@db:5432/midday

# Optional: restrict which queues are processed (comma-separated queue names).
# Example: WORKER_ENABLED_QUEUES=transactions,inbox
WORKER_ENABLED_QUEUES=transactions,rates,accounting

# Embeddings (optional). If GOOGLE_GENERATIVE_AI_API_KEY is not set, we fall back
# to a local deterministic embedding generator so the worker can still run.
EMBEDDINGS_PROVIDER=local
EMBEDDINGS_DIMENSIONS=768

# Optional: reduce concurrency per queue (development defaults are already low).
WORKER_CONCURRENCY_INBOX=10
WORKER_CONCURRENCY_INBOX_PROVIDER=2
WORKER_CONCURRENCY_TRANSACTIONS=2
WORKER_CONCURRENCY_DOCUMENTS=5
WORKER_CONCURRENCY_EMBEDDINGS=5
WORKER_CONCURRENCY_RATES=1
WORKER_CONCURRENCY_ACCOUNTING=2

# Optional: BullBoard basic auth (leave empty to disable)
BOARD_USERNAME=
BOARD_PASSWORD=

# Supabase storage/auth are not self-hosted in bypass mode.
# Keep these as placeholders so code paths that construct a client don't crash.
SUPABASE_URL=http://localhost:54321
SUPABASE_SERVICE_KEY=local-service-key-not-used-with-bypass

# MinIO storage (configured via docker-compose environment block)
USE_MINIO=true

# =============================================================================
# COOLIFY / PRODUCTION DEPLOYMENT - Custom Domains
# =============================================================================
# MinIO public URL
MINIO_PUBLIC_URL=https://minio.bastco.org
